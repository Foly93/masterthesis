SUMMARY
--This directory contains the attempt to generate useful toxicology data for Machine Learning (ML) purposes from pubchem assay data
--Raw data is downloaded from Pubchem (https://ftp.ncbi.nlm.nih.gov/pubchem/Bioassay/CSV/Data/) and then transformed by various executables
--'Raw data' refers to the downloaded directories from pubchem, e.g. '0000001_0001000/'
--during the process automatic steps (bash- and python-based) are conducted aswell as manual steps
--the major problem to be solved in this directory is the sheer amount of data saved in pubchem
--there are 114Mio. Assays and screening them manually is way out of scope
--the executables given here (consecutively numbered) solve this problem
--they are all well commented and serve as a log of what automatic steps have been conducted in detail
--the manual steps are documented in this file
--the output, i.e. machine learning ready datasets are transferred to the subdirectory 'ml_ready/'
--this summary contains the DIRECTORY CONTENT, and a COMPLETE OVERVIEW OF PROCESSES CONDUCTED TO OBTAIN THE ML-READY ASSAYS

DIRECTORY CONTENT
--Directories
----0000001_0001000/	| directory containing the data corresponding to AID 1-1000	 		| downloaded raw data
----0001001_0002000/	| directory containing the data corresponding to AID 1001-2000			| downloaded raw data 
----0002001_0003000/	| directory containing the data corresponding to AID 2001-3000			| downloaded raw data
----0485001_0486000/	| directory containing the data corresponding to AID 485001-486000		| downloaded raw data
----0504001_0505000/	| directory containing the data corresponding to AID 504001-505000		| downloaded raw data
----0588001_0589000/	| directory containing the data corresponding to AID 588001-589000		| downloaded raw data
----0602001_0603000/	| directory containing the data corresponding to AID 602001-603000		| downloaded raw data
----0624001_0625000/	| directory containing the data corresponding to AID 624001-625000		| downloaded raw data
----0651001_0652000/	| directory containing the data corresponding to AID 651001-652000		| downloaded raw data
----0720001_0721000/	| directory containing the data corresponding to AID 720001-721000		| downloaded raw data
----0743001_0744000/ 	| directory containing the data corresponding to AID 743001-744000		| downloaded raw data
----_misc/		| directory that contains redundant auxiliary files; might be empty		| subdirectory
----ml_ready/		| contains the final machine learning ready assays combined with cp data	| subdirectory with final data
----tox_assays/		| contains assays extracted from the rawdata by 02*sh related to toxicity	| subdirectory with intermediate results
--Executables
----01_filer_largest_assays.sh	| creates the largest_assays.txt file by going through the rawdata and eventually by manual action assay_descriptions.csv is the final result of the first step
----02_get_tox_assays.sh	| uses tox_targets.txt and assay_descriptions to extract toxicity related large assays from the rawdata directories and transfers them to toxassay/
----03_find_all_compounds.sh	| all compounds that are present in all assays are saved to a list and then duplicates are removed, resulting in all_featured_compounds.txt
----04_compounds_inchi_keys.py	| the only usable columns in all_featured_compounds are the CID and the InChI-Keys which this file extracts to compounds_inchi_keys.txt
----05_convert_inchikeys.py	| merges the inchi keys saved in compounds_inchi_keys.txt with a given assay in toxassay/ and saved the assay that is now inchi-annotated
----05_convert_inchikeys.sh	| executes 05*.py through all assays in tox_assays/
----06_overlap_cp.py		| calculates the overlap of an inchi-key annotated tox_assay with the cp data set that is in a whole other directory and transfers them to ml_ready/
----06_overlap_cp.sh		| executes 06*.py for all assays in tox_assays/
--Files
----all_featured_compounds.txt	| list of Pubchem CIDs that are present in the toxicity related assays saved in tox_assays; used for downloading information from pubchem; generated by 03*sh
----assays_descriptions.csv	| detailed descriptions of the largest assays downloaded from pubchem. the file largest_assays.txt was used for downloading; use in 02*.sh
----compounds_descriptions.csv	| detailed descriptions of all compounds present in the tox_assays/ directory. the file was downloaded from pubchem using all_featured_compounds.txt
----compounds_inchi_keys.txt	| inchi-keys of all the compounds sorted by Pubchem-CID; generated by 04*.py
----largest_assays.txt		| list of the largest assays present in the downloaded rawdata directories generated by 01*.sh
----tox_assays.txt		| list of assays (AID) that might be related to toxicity; generated by 02*.sh
----tox_targets.txt		| list of targets, that are predicted to be related to toxicity; downloaded from a paper of the bender group

COMPLETE OVERVIEW OF PROCESSES CONDUCTED TO OBTAIN THE ML-READY ASSAYS
--The final Assays will be named after their Pubchem AID and need to meet the following criteria:
----1. The size of the Original Bioassay data needs to be among the biggest file sizes on the Pubchem Public repository (ftp://ftp.ncbi.nlm.nih.gov/pubchem/Bioassay/CSV/Data/)
----2. They have to be related to Toxicity or toxicity targets
----3. The Overlap with the Cell-Painting Assay needs to have at least 100 Compounds labelled 'Active'

--Summary of transformations performed from zero to the 52 selected Assays:
----1. Manual: download the 10 biggest directories from Pubchem Public repository (https://ftp.ncbi.nlm.nih.gov/pubchem/Bioassay/CSV/Data/)
----2. Automatic: generate a list of the 100 biggest files in each of the 10 biggest folders for further processing (i.e. Top-1000 Assays; ref. 01_*.sh)
----3. Manual: Upload the list to Pubchem to download a description of the Top-1000 Assays
----4. Automatic: copy Assays that are labelled with 'Toxicity' or contain a target name present in 'tox_targets.txt', i.e. Top-481 Assays, to tox_assays/ (ref. 02_*.sh)
----5. Automatic: list all unique compounds by their CID present in the Top-481 Assays (ref. 03_*.sh)
----6. Manual: Upload the CID-list to Pubchem and download a description of all compounds, which also contains the InChI-Keys
----7. Automatic: delete the redundant column in the pubchem file that describes all compounds (ref. 04_*.py)
----8. Automatic: use the CID-description to annotate the Top-481 Assays with their InChI-Keys (ref. 05_*.*)
----9. Automatic: Overlap all the Assays with the CP-Dataset (ref. 06_*.*)
----10.Automatic: filter for assays that have 100 compounds labelled 'Active' resulting in Top-52 Assays (ref. ml_ready/_*/)
----11.Automatic: remove all compounds that are neither labelled 'Active' nor 'Inactive' (ref. ml_ready/)



